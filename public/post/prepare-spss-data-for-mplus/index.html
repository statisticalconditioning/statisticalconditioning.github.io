<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.55.1" />
  <meta name="author" content="William M. (Hank) Murrah, III">
  <meta name="description" content="Assistant Professor of Quantitative Methods">

  
  
  
  
    
  
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  


  

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-36666113-2', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  <link rel="alternate" href="" type="application/rss+xml" title="Statistical Thinking">
  <link rel="feed" href="" type="application/rss+xml" title="Statistical Thinking">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="/post/prepare-spss-data-for-mplus/">

  

  <title>Prepare SPSS Data for Mplus | Statistical Thinking</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Statistical Thinking</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#courses">
            
            <span>Courses</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#teaching">
            
            <span>Teaching</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#research">
            
            <span>Research</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Prepare SPSS Data for Mplus</h1>
    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2019-01-13 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Jan 13, 2019
    </time>
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    8 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/post/prepare-spss-data-for-mplus/#disqus_thread"></a>
  

  
  
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Prepare%20SPSS%20Data%20for%20Mplus&amp;url=%2fpost%2fprepare-spss-data-for-mplus%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fprepare-spss-data-for-mplus%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fprepare-spss-data-for-mplus%2f&amp;title=Prepare%20SPSS%20Data%20for%20Mplus"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fprepare-spss-data-for-mplus%2f&amp;title=Prepare%20SPSS%20Data%20for%20Mplus"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Prepare%20SPSS%20Data%20for%20Mplus&amp;body=%2fpost%2fprepare-spss-data-for-mplus%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      


<p>When I have to prepare data for Mplus, I use the <code>MplusAutomation</code> package in R. Its great! I import the SPSS data file into R with the <code>foreign</code> package. Then I use the <code>prepareMplusData()</code> function to create a .dat file for use in Mplus. This function also creates basic Mplus code that can pasted into Mplus or a text file used to prepare Mplus code files. <code>MplusAutomation</code> has many other great features and I highly recommend it for those who use Mplus and R.</p>
<p>But many of my colleagues don’t use R, and therefore this option is not feasible. Recently I gave an informal talk to some colleagues on how to get data from SPSS to Mplus, which I thought might be useful to others who needed to manually prepare SPSS data for Mplus. Here, I include the steps I recommended with links to an SPSS syntax example.</p>
<p>Before describing the steps, I think it is important to point out the major differences between an SPSS data file and an Mplus data file. SPSS data files include variable names, variable labels and other information. They also may contain different types of variables including numeric, string, and date variables. Mplus data files are simply a tab delimited numeric matrix. No variable names and only numbers as data points. Variable names are supplied in the Mplus code and are not in the data file.</p>
<div id="basic-steps" class="section level1">
<h1>Basic Steps</h1>
<p>The following 6 steps can be used to get SPSS data ready for Mplus:</p>
<ol style="list-style-type: decimal">
<li>Make a copy of the SPSS data file</li>
<li>Recode any non-numeric variables you want to include in the Mplus data file</li>
<li>Rename variables longer than 8 characters</li>
<li>Deal with missingness values (if necessary)</li>
<li>Save SPSS data file as a tab delimited file (.dat)</li>
<li>Create basic code for Mplus</li>
<li>Check descriptive statistics and missingness patterns</li>
</ol>
<div id="make-a-copy-of-the-spss-file" class="section level2">
<h2>1. Make a copy of the SPSS file</h2>
<p>This step is pretty simple. It is a good idea to keep an original copy of your data file. That way you can always start over. I will be using an example data file that contains a subset of cases and variables from the STAR public access data set. This data can be found in the R package <code>AER</code>. If you have R you can use the following code to generate the data file:</p>
<pre><code># Install and load AER package and open the STAR data.
install.packages(&#39;AER&#39;)
library(AER)
data(STAR)

# Create data frame with 100 randomly selected cases and 8 variables.
set.seed(1234)
star &lt;- STAR[sample(nrow(STAR),100),
             c(&#39;gender&#39;,&#39;ethnicity&#39;,&#39;readk&#39;,&#39;read1&#39;,&#39;mathk&#39;,&#39;math1&#39;,&#39;school1&#39;,&#39;degreek&#39;)]
names(star) &lt;- c(&#39;gender&#39;,&#39;ethnicity&#39;,&#39;readKindergarten&#39;,&#39;read1&#39;,
             &#39;mathKindergarten&#39;,&#39;math1&#39;,&#39;school1&#39;,&#39;degreek&#39;)
# save R data frame as comma separated values file to be imported
# into SPSS.
write.csv(star,file=&quot;star.csv&quot;)
# You can use the &#39;Read Text Data&#39; menu option in SPSS to import this file into SPSS.</code></pre>
<p>You can also find of copy of the SPSS file on my github page for this tutorial <a href="https://github.com/wmmurrah/SPSS2MplusDemo">here</a>. .</p>
</div>
<div id="recode-any-non-numeric-variables" class="section level2">
<h2>2. Recode any non-numeric variables</h2>
<p>Mplus only handles numeric data. This does not mean you can’t have categorical variables in your analyses, but they have to be coded with numbers. For example, the variable ‘gender’ in the star data frame consists of two string values: “female” and “male”. We can recode these so females have a value of ‘0’ and males have a value of ‘1’. The following SPSS syntax does the trick:</p>
<pre><code>RECODE 
gender
(&#39;female&#39; = 0)
(&#39;male&#39; = 1)
(MISSING=SYSMIS)
 into male.
EXECUTE.</code></pre>
<p>Notice that I also renamed the variable ‘male’ to indicate the category the variable identifies. If you run across a variable named ‘gender’ coded as ‘0’s and ’1’s, you don’t know which value signifies females and which males. By naming the binary variable ’male’, I am indicating that ’1’s are males, therefore the ’0’s must be females. This is just good data management.</p>
</div>
<div id="rename-variables-longer-than-8-characters" class="section level2">
<h2>3. Rename variables longer than 8 characters</h2>
<p>Mplus only recognizes the first 8 characters of variable names. If the first 8 characters of each of your variables are unique, you might be okay with Mplus truncating your variable names. But if you have variables in which the first 8 characters are not unique you can run into major problems. For example, if you had variables named ‘kindergartenMath’ and ‘kindergartenRead’, Mplus would treat them as having the same variable name. So don’t overlook this step!</p>
<p>The following SPSS code renames the long variables in the star data:</p>
<pre><code>RENAME VARIABLES 
(ChildIdentification = childId)
(readKindergarten = readk)
(mathKindergarten = mathk).</code></pre>
</div>
<div id="deal-with-missing-values" class="section level2">
<h2>4. Deal with missing values</h2>
<p>There are two types of missing data possible in an SPSS data frame. System missing data is indicated by a period (‘.’). You can also designate any numeric value as a user missing value (e.g. -99). You don’t necessarily have to change these values to prepare your data for Mplus. But you must at least know which values indicate missingness for EACH variable. I also note that I have experienced some difficulty with the period (‘.’) value as a missing indicator when preparing SPSS data for Mplus. I usually recode all missing values to one numeric value (e.g. -99, or -999) that is not in the range of possible values for any of my data. Later you will have to tell Mplus what values indicate missing data for your variables. It is much easier if this value is one number, and it is the same for all variables. However, you may have good reason to have different missing values. Again, just know what your missingness indicators are.</p>
</div>
<div id="create-a-tab-delimited-file" class="section level2">
<h2>5. Create a tab delimited file</h2>
<p>Now that you have an SPSS file in order, you need to save it as a tab delimited file. To do this you just need to click on the ‘File’ option in the SPSS dataSet menu,and then click ‘Save As’. In the ‘Save as type:’ menu on the resulting tab, select ’tab delimited (*.dat)‘. <strong>MAKE SURE THE ’Write variable names to speadsheet’ BOX IS NOT CHECKED!</strong> Mplus data files should only contain numbers. You can also use the ’Variables…’ radio to select only the variables you need in Mplus. This is useful if you have non-numeric variables in the original data file that you don’t want to use and therefore don’t what to waste time transforming. Below is a snippet of SPSS syntax that resulted from the above procedure on the star data.</p>
<pre><code>SAVE TRANSLATE OUTFILE=&#39;C:\Dropbox\3_Teaching\SPSS2MplusDemo\starMplus.dat&#39;
  /TYPE=TAB
  /MAP
  /REPLACE
  /CELLS=VALUES.</code></pre>
</div>
<div id="create-basic-code-for-mplus" class="section level2">
<h2>6. Create basic code for Mplus</h2>
<p>Finally, you will want to create a basic set of code for Mplus that will be the basis of all your analyses used in Mplus. I will mention three things you want to make sure get into your Mplus code accurately. First, you need to include the path to your tab delimited file in the DATA section of your Mplus code file. Second, you want to make sure you have the variable names correct. Remember that Mplus data files only contain the numeric data. Variable names are assigned to each column of the tab delimited file with the VARIABLE command in the Mplus code file. To keep you from having to type in all the variable names, you can copy the column of variable names from the SPSS file (in Variable View) and paste them into EXCEL. Then use the transpose function in the ‘paste special’ menu to convert the column of names into a row of names. Then paste this row in the Mplus code file. Third, you need to tell Mplus what the missing data values are. Because I used -99 for the only missing value for ALL of my variables, the following code should be in the VARIABLE section of your Mplus code file:</p>
<pre><code>MISSING ARE ALL (-99);</code></pre>
<p>I will mention one final peculiarity of Mplus that can trip up this process. Mplus only allows 80 characters on each line of code. So you may have to break up long rows into shorter rows. For example the file path and variable names often have to be broken up this way. If you don’t Mplus will give you an error message.
If the data file (<code>starMplus.dat</code>) is in the same folder as the Mplus code file (let’s say we call it <code>starBasic.inp</code>) then the code file might look like this:</p>
<pre><code>TITLE:  STAR analysis

DATA:
  FILE IS &quot;starMplus.dat&quot;;

VARIABLE:
  NAMES ARE childId readk   read1   mathk   math1
  male  white other;
  USEVARIABLES ARE readk-other;
  MISSING ARE ALL (-99);
  categorical are male-other;
ANALYSIS:
  TYPE IS Basic;

OUTPUT:  SAMPSTAT PATTERNS;
plot: type = plot1 plot2;</code></pre>
</div>
<div id="check-descriptive-statistics-and-missingness-patterns" class="section level2">
<h2>7. Check descriptive statistics and missingness patterns</h2>
<p>To make sure your data has been correctly converted to the .dat file, run some descriptive statistics in both SPSS and Mplus. Because of the default methods each program uses to deal with missing data, you will probably have to do a few things to get an equivalent comparison. I ask SPSS to use listwise deletion for descriptive statistics. Then I do the same in Mplus. Take a look a the SPSS syntax file and the Mplus files that have ‘LW’ in the title for details of how to do this. Basically, it entails including something like the following code in SPSS:</p>
<pre><code>DESCRIPTIVES VARIABLES=readk read1 mathk math1 male white other
/STATISTICS=MEAN STDDEV MIN MAX
/MISSING=LISTWISE.</code></pre>
<p>Notice the last line is a missing command, and is not available in the drop down menu. So you will have to use the syntax editor (but you should be doing that anyway!).</p>
<p>For Mplus include the following command as part of the data section of the input file:</p>
<pre><code>   LISTWISE = ON;</code></pre>
<p>You can also compare the missingness patterns generated by SPSS and Mplus (see the ‘LW’ files) which should be the same. However, note that the orientation of patterns differs in the two programs.</p>
<p>And that’s it! You can download all the code files for this demonstration from my github page found <a href="https://github.com/wmmurrah/SPSS2MplusDemo">here</a>. The ‘stars.sps’ and the ‘SPSSdescriptivesLW.sps’ files contain all the syntax needed to complete this tutorial.</p>
</div>
</div>

    </div>

    
    
    
    

  </div>

</article>






<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "statistical-thinking" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 William Murrah &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    

    
    
    <script id="dsq-count-scr" src="//statistical-thinking.disqus.com/count.js" async></script>
    

    
    <script async defer src="//maps.googleapis.com/maps/api/js?key=AIzaSyBNrEFFN9mUmRs4enTvhQdfXz8TrVGZmII"></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

